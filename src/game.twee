:: StoryTitle
Psychotlenij


:: StoryData
{
  "ifid": "5F7DC4B3-1596-4203-B4E4-490A46154FFC",
  "format": "SugarCube",
  "format-version": "2.37.3",
  "start": "Начало",
  "zoom": 1
}


:: StoryInit
<<script>>
  // @ts-check

  const ArrayExt = {
    /**
     * @template T
     * @template U
     * @param {T[]} arr
     * @param {(item: T) => U} projection
     * @returns {T[]}
     */
    getFirstDuplicates(arr, projection) {
      if (arr.length === 0) {
        throw new Error('Array is empty!')
      }

      const first = projection(arr[0])
      const result = []

      for (const item of arr) {
        if (projection(item) === first) {
          result.push(item)
        } else {
          break
        }
      }
      return result
    }
  }

  /** @typedef {"adequacy" | "inadequacy" | "capitalism" | "tlenost"} CharacteristicName */

  const CharacteristicName = {
    /**
     * @param {CharacteristicName} name
     */
    getOrder(name) {
      switch (name) {
        case "adequacy": return 4
        case "inadequacy": return 3
        case "capitalism": return 2
        case "tlenost": return 1
        default: return 0
      }
    }
  }

  /** @typedef {{ name: CharacteristicName, value: number }} Characteristic */

  /**
   * @param {Characteristic[]} characteristics
   */
  function getTopCharacteristic(characteristics) {
    if (!Array.isArray(characteristics) || characteristics.length === 0) {
      throw new Error('Array is empty!')
    }

    const byValueDesc = [...characteristics].sort((a, b) => b.value - a.value)
    const topValueGroup = ArrayExt.getFirstDuplicates(byValueDesc, x => x.value)
    const byOrderDesc = topValueGroup.sort(
      (a, b) => CharacteristicName.getOrder(b.name) - CharacteristicName.getOrder(a.name)
    )
    return byOrderDesc[0]
  }

  function testGetTopCharacteristic() {
    {
      const result = getTopCharacteristic([
        { name: "adequacy", value: 1 },
        { name: "tlenost", value: 4 },
        { name: "capitalism", value: 3 },
        { name: "inadequacy", value: 2 },
      ])
      console.log(result.name === "tlenost" && result.value === 4)
    }

    {
      const result = getTopCharacteristic([
        { name: "adequacy", value: 0 },
        { name: "inadequacy", value: 2 },
        { name: "capitalism", value: 2 },
        { name: "tlenost", value: 1 },
      ])
      console.log(result.name === "inadequacy" && result.value === 2)
    }

    {
      const result = getTopCharacteristic([
        { name: "adequacy", value: 2 },
        { name: "inadequacy", value: 2 },
        { name: "capitalism", value: 1 },
        { name: "tlenost", value: 2 },
      ])
      console.log(result.name === "adequacy" && result.value === 2)
    }
  }

  // testGetTopCharacteristic()

  window["getTopCharacteristic"] = getTopCharacteristic
<</script>>
<<set $adequacy to 0>>
<<set $inadequacy to 0>>
<<set $capitalism to 0>>
<<set $tlenost to 0>>

<<script>>
  setup.achievementDescriptions = {
    "Симулянт (концовка)": {
      name: "Симулянт (концовка)",
      desc: "А нечего было претворяться нормальным!",
    },
    "Псих (концовка)": {
      name: "Псих (концовка)",
      desc: "Да у тебя, поди, совсем крышнячок протёк.",
    },
    "Безумие заразительно (концовка)": {
      name: "Безумие заразительно (концовка)",
      desc: "Уйди со своим капитализмом!",
    },
    "Тревоги есть у всех (концовка)": {
      name: "Тревоги есть у всех (концовка)",
      desc: "Все мы — творожные массы, чего уж скрывать.",
    },
  };

  setup.achievements = recall("achievements", {
    "Симулянт (концовка)": false,
    "Псих (концовка)": false,
    "Безумие заразительно (концовка)": false,
    "Тревоги есть у всех (концовка)": false,
  })

  setup.unlock = function(id) {
    const isAchievementEarned = setup.achievements[id]
    console.log(isAchievementEarned)
    if (isAchievementEarned) return
    setup.achievements[id] = true
    memorize("achievements", setup.achievements)
    const ach = setup.achievementDescriptions[id]
    UI.alert(`
      <div class="achievement">
        <strong>${ach.name}</strong><br>${ach.desc}
      </div>
    `, { duration: 3000 });
  };
<</script>>


:: StoryMenu
[[Достижения]]


:: StoryStylesheet [stylesheet]
.pepe-drool {
  width: 48px;
  height: 48px;
  background-image: url("data:image/webp;base64,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");
  background-size: contain;
  background-repeat: no-repeat;
  display: inline-block;
}


:: Начало
! Психотленный

Текстовая игра про Нетленного, который отправился в психдиспансер, чтобы добыть себе немного...

* [[Начать игру]]
* [[Достижения]]


:: Достижения
! Достижения

<<nobr>>
  <ul>
    <<for _id, _achEarned range setup.achievements>>
      <<set _ach to setup.achievementDescriptions[_id]>>
      <<if _achEarned>>
        <li>✅ ''_ach.name'' – _ach.desc</li>
      <<else>>
        <li>⬜️ _ach.name</li>
      <</if>>
    <</for>>
  </ul>
<</nobr>>\

* <<back "Назад">>


:: Начать игру

Ты — Павел «Нетленный» Петров и сегодня ты набрался смелости, чтобы сходить в психдиспансер. О нет, ты совсем не сумасшедший. Ты — гений, который замыслил идеальный план, чтобы добыть немного себе //его//.

* [[Рассказать о нём]]

:: Рассказать о нём

Нет, это не что-то запрещенное, как можно было подумать. Это вполне себе распространенный продукт, который можно купить на любом маркетплейсе.

* [[Купить|Купить VR]]


:: Купить VR
Конечно, ты можешь его купить со своими <<link "десятью работами">>
  <<script>>
    Dialog.setup("10 работ");
    Dialog.wiki("Да, ты действительно работаешь на десяти работах. Как тебе это удается? Ну, очень просто: у обычного человека максимум 250IQ, а у тебя их — целых 3000IQ! Поэтому ты с легкостью умеешь обманывать других. Интервью окончено.");
    Dialog.open();
  <</script>>
<</link>> и легким <<link "фармом денег">>
  <<script>>
    Dialog.setup("Фарм денег");
    Dialog.wiki("Ну, ты иногда поигрываешь в \"Веселую ферму\", а кто не поигрывает?");
    Dialog.open();
  <</script>>
<</link>>, которые и не снились <<link "нищебродам">>
  <<script>>
    Dialog.setup("Нищеброд");
    Dialog.wiki("Так ты нежно называешь всех вокруг (потому что ты — самый умный, конечно же).");
    Dialog.open();
  <</script>>
<</link>> твоей страны, но ты, как последовательный капиталист, очень любишь получать деньги, а не тратить. А еще ты любишь получать подарки.

* [[Потребовать подарок]]


:: Потребовать подарок
У тебя много друзей — это твой главный капитал. С них ты можешь потребовать что угодно (только не факт, что дадут). Среди них особенно выделяется: <<link "мужик в шляпе">>
  <<script>>
    Dialog.setup("Человек в шляпе");
    Dialog.wiki("Если и есть на свете человек, который наиболее правдоподобно делает вид, что понимает тебя, так это он — человек в шляпе.");
    Dialog.open();
  <</script>>
<</link>>, <<link "европейская принцесса">>
  <<script>>
    Dialog.setup("Загадочная европейская принцесса");
    Dialog.wiki("Ты не хочешь хвастаться, конечно, но да, ты дружишь с европейской принцессой. Настоящая ли она? По твоим меркам да. Для тебя все жители Европы — короли и королевы, принцы и принцессы. А у них всегда найдется подарочек-другой для тебя (или нет).");
    Dialog.open();
  <</script>>
<</link>> и <<link "твой преданный ненавистник">>
  <<script>>
    Dialog.setup("Твой преданный ненавистник");
    Dialog.wiki("У всякого успешного полководца должен быть тот, кто в минуту триумфа спустит тебя с небес на землю. В противном случае ты рискуешь зазнаться в своем великолепии и натворить бед. Поэтому если и есть на свете зло, то зло должно работать на тебя.");
    Dialog.open();
  <</script>>
<</link>>.

* [[Обратиться к мужику в шляпе]]
* [[Обратиться к европейской принцессе]]
* [[Обратиться к своему преданному ненавистнику]]
* [[Махнуть на всех рукой]]

:: Обратиться к мужику в шляпе
<<set $capitalism to $capitalism + 1>>Ты дотошно начинаешь расписывать человеку в шляпе про важность и необходимость инвестиций в капиталистической экономике. Ты объясняешь ему, что инвестиции развивают производство и расширяют его, что в свою очередь создает рабочие места. Но он высказывает свое недоумение: "Как это всё связано с твоим желанием приобрести //это// и что в итоге общество будет с этого иметь?".

* [[Сказать, что надо быть индивидуалистом]]


:: Сказать, что надо быть индивидуалистом
Ты отвечаешь ему, что общество тут не при чем, что нужно быть индивидуалистом, т.е. иметь свое мнение, независимое от общества и государства. Но он продолжает упорствовать и заявляет, что невозможно быть индивидуалистом, когда живешь в обществе. Ведь оно влияет на тебя, определяет твои мысли и ценности, как и ты влияешь на него.

* [[Уличить в рабском гене]]


:: Уличить в рабском гене
Ты заявляешь мужику в шляпе, что рабский ген ему мешает познать индивидуализм, что совковое мышление и пропаганда довлеет над ним. Но он не унимается и продолжает доказывать, что, дескать, человек — продукт обстоятельств и окружения, что нет никакого рабского гена, а пропаганда сама довлеет над тобой.

* [[Махнуть на человека в шляпе]]


:: Махнуть на человека в шляпе
Мирного решения не проглядывается, поэтому ты <<link "встаешь и молча выходишь из чата">>
  <<script>>
    Dialog.setup("Уйти по английски");
    Dialog.wiki("Это — лучший способ выйти победителем из полемики. Твое дело — раскрыть людям глаза. Если они хотят продолжать жить в своих рабских иллюзиях — это их право.");
    Dialog.open();
  <</script>>
<</link>>. Компьютер гаснет, воцаряется тишина. <<include "Газета">>


:: Газета
На столе ты видишь <<link "местную газетенку">>
  <<script>>
    Dialog.setup("Газеты в XXI веке");
    Dialog.wiki("Да, ты всё еще читаешь газеты, потому что экономишь... Ладно, иногда ты пытаешься обхитрить систему и не платишь за интернет. В итоге несовершенная система тебя наказывает. Приходится узнавать новости из других источников.");
    Dialog.open();
  <</script>>
<</link>>.

* [[Почитать газетку]]


:: Обратиться к европейской принцессе
<<set $tlenost to $tlenost + 1>>Все — ненавистники и жестокие тираны твоей души, но только не она, добрая европейская принцесса! Она не может быть не доброй (принцесса же!). Она просто упрямая, поэтому всё еще отказывается дарить тебе вожделенный технологический продукт. Однажды это, конечно, случится, но пока что приходится рассчитывать только на свою гениальность. <<include "Газета">>


:: Обратиться к своему преданному ненавистнику
<<set $inadequacy to $inadequacy + 1>>Ты просишь своего преданного ненавистника отсыпать немного тебе барышей на //это//. Естественно, ненавистник ведет себя максимально по-хамски. Он начинает глумиться над тобой, называть тебя плутом и мошенником.

* [[Ответить ненавистнику достойно]]


:: Ответить ненавистнику достойно
Всё это ты уже не раз от него слышал, поэтому заранее подготовил неопровержимый контраргумент "Нет, ты!". Взамен ненавистник припоминает тебе <<link "не самые приятные эпизоды твоей жизни">>
  <<script>>
    Dialog.setup("Ошибки молодости");
    Dialog.wiki("Тебе не хочется о них говорить. Они есть у всех. Опыт — сын ошибок трудных. Что было, то прошло. Не ошибается тот, кто ничего не делает. А ты делал и не стеснялся этого.");
    Dialog.open();
  <</script>>
<</link>>.

* [[Эскалировать конфликт]]


:: Эскалировать конфликт
Твои разногласия с ненавистником переходят в публичное поле (не без твоей подачи, конечно же). Со всей ответственностью ты заявляешь, что водил мамку ненавистника по театрам культурной столицы. Уровень адекватности дискуссии набирает отрицательные обороты. Звучат призывы остановить неадекват. Админами раздаются муты, баны. Под репрессии попадаешь и ты на неопределенный срок. Со <<link "сладким вкусом победы">>
  <<script>>
    Dialog.setup("Сладкий вкус победы");
    Dialog.wiki("А он не может быть другим, ибо раз затыкают рты, значит, ты прав, баста.");
    Dialog.open();
  <</script>>
<</link>> ты выключаешь компьютер. <<include "Газета">>


:: Махнуть на всех рукой
<<set $adequacy to $adequacy + 1>>На социальный капитал надейся, но и сам не плошай. Ни у кого из твоих последователей все равно нет денег на //это//. Расчитывать приходится только на себя. Ты закрываешь месседжер. <<include "Газета">>


:: Почитать газетку
Однажды утром твоя гениальность вычитала в <<link "местной газете">>
  <<script>>
    Dialog.setup("Чтение газет");
    Dialog.wiki("Да, ты всё еще читаешь газеты, потому что экономишь... Ладно, ты забыл оплатить интернет.");
    Dialog.open();
  <</script>>
<</link>>, что психиатры твоего родного города П лечат <<link "депрессию и творожные расстройства">>
  <<script>>
    Dialog.setup("Твое блестящее психическое состояние");
    Dialog.wiki("В ту минуту ты очень сильно пожалел, что абсолютно психически здоров.");
    Dialog.open();
  <</script>>
<</link>> с помощью [[этой штуки->Пустить слюну на газету]].


:: Пустить слюну на газету
Тебя всегда интересовало, как ведет себя собака Павлова, когда смотрит на свет. Теперь ты это узнал.
<span class="pepe-drool" />
На газете почему-то образовалось [[мокрое пятно->Выбросить газету]].


:: Выбросить газету
Газетка улетает в урну. Ты разваливаешься на своем любимом кресле, надеваешь шапочку из фольги и придумываешь план. Осталось его только [[воплотить->Воплотить план]].


:: Воплотить план
Утром ты берешь с собой два пирожка с капустой и [[отправляешься на дело->Занять свободное место в маршрутке]].


:: Занять свободное место в маршрутке
Ты протискиваешься в битком забитую маршрутку. Через какое-то время одно место освобождается, но на него претендуют несколько желающих.

* [[Побежать наперегонки за место]]
* [[Поднять цену за проезд]]
* [[Просто уступить]]
* [[Задуматься о бренности бытия]]


:: Поднять цену за проезд
<<set $capitalism to $capitalism + 1>>Ты соображаешь, как <<link "поднять цену за проезд">>
  <<script>>
    Dialog.setup("Поднятие цены за проезд");
    Dialog.wiki("Ты рассуждаешь так: спрос на свободные места превышает предложение по ним. Если повысить цену за проезд, скажем, в два раза, то прибыль для маршрутчика останется та же, но нищебродов станет в два раза меньше. Следовательно, меньше нищебродов — больше свободных мест.");
    Dialog.open();
  <</script>>
<</link>>, пока желающие дерутся за свободное место. Потом до тебя доходит, что если поднять цену, то тебе придется выйти и пойти пешком, потому что единственный доступный капитал у тебя с собой — это пирожок.

* [[Продать пирожок]]


:: Продать пирожок
Когда перед человеком машут вкусным пирожком, то предложение рождает спрос. А на вопрос "Почему так дорого?" ты отвечаешь просто: "Инфляция". Пирожок уходит довольному покупателю (ошарашенному мужику), а взамен ты получаешь ценные бумажки.

* [[Распорядиться средствами]]


:: Распорядиться средствами
Теперь вопрос — как этим распорядиться? Неожиданно ты осознаешь, что в твоём плане есть один маленький изъян — а вдруг цена останется такой навсегда? В таком случае тебе придется каждый раз оплачивать проезд по двойной цене! Расставаться с пирожками тебе жалко (тем более, у тебя и так их дома нет).

* [[Купить место]]


:: Купить место
Ты решаешь (как опытный предприниматель!) инвестировать деньги в личные удобства (сразу бы так). Очередной ошарашенный пассажир (дама лет 40), берёт предложенные деньги и уступает место. В эту же минуту маршрутка как раз подъезжает к нужной остановке.

* [[Выйти на остановке]]


:: Задуматься о бренности бытия
<<set $tlenost to $tlenost + 1>>Ты задумываешься о своей жизни: о том, что ты делаешь, почему ты такой и как с этим быть. Мысли отягощают твои плечи. Твои ноги подгибаются. Слабость накатывает на тебя. Небезразличные окружающие это замечают. Они подхватывают тебя под руки и усаживают на свободное место. Резкий запах нашатыря приводит тебя в чувства. Всё, считай, ты добился своего, но зачем... А вот, кстати, и твоя остановка.

* [[Выйти на остановке]]


:: Побежать наперегонки за место
/* todo: дописать */
<<set $inadequacy to $inadequacy + 1>>
[[Выйти на остановке]]


:: Просто уступить
<<set $adequacy to $adequacy + 1>>Тебе ж не нужны проблемы, верно? Лишние внимание тебе ни к чему. У тебя есть план, и ты ему следуешь. Постоишь, ничего страшного с твоими ногами не случится. А вот, кстати, и твоя остановка.

* [[Выйти на остановке]]


:: Выйти на остановке
По дороге с тобой ничего не приключается, но приходится пожертвовать <<link "раздавленными всмятку пирожками">>
  <<script>>
    Dialog.setup("Раздавленные пирожки");
    Dialog.wiki("Пришлось побороться за свободное место в общественном транспорте. Ну, потому что ты очень устаешь на своих 10 работах, а 3000IQ требует с тебя очень много калорий.");
    Dialog.open();
  <</script>>
<</link>>. Ты робко заходишь психдиспансер. На секунду тебе кажется, что план не такой блестящий. Но ты быстро берешь себя в руки и [[подходишь к регистратуре->Подойти к регистратуре]].


:: Подойти к регистратуре
Дама из регистратуры смотрит на тебя.

* [[Выяснить цену вопроса]]
* [[Засомневаться]]
* [[Пустить слюну]]
* [[Записаться к врачу]]


:: Выяснить цену вопроса
<<set $capitalism to $capitalism + 1>>И тут до тебя доходит, что <<link "лечение может быть не такое бесплатное">>
  <<script>>
    Dialog.setup("Бесплатная медицина при капитализме");
    Dialog.wiki("Право на медицину де-юре, возможно, есть у каждого, только вот де-факто не все ее могут себе позволить. Всё-таки ты живешь при капитализме, а при нём существование коммерческого хода идёт вразрез с бесплатным. Одно рано или поздно пожрет другое. А иначе зачем вообще коммерциализация существует?");
    Dialog.open();
  <</script>>
<</link>>, как тебе могло показаться. Может получиться так, что то, что ты хочешь получить задаром, влетит тебе в копеечку. Поэтому ты начинаешь компостировать мозги тётеньке с регистратуры. На что она отвечает тебе следующим образом:

— Молодой человек, медицина у нас бесплатная, но для //вас лично// мы можем сделать скидку в целых 0.00 копеек. Вас это устроит?

После заветного слова "бесплатно" ты больше ничего не слышишь и смело записываешься на приём.

* [[Занять очередь]]


:: Засомневаться
<<set $tlenost to $tlenost + 1>>Ты начинаешь убеждать себя и заодно даму в регистратуре, что тебе срочно, вот прям сейчас нужна помощь. Когда она тянется к трубке от телефона, не отрывая от тебя понимающего взгляда, до тебя начинает доходить, что план, придуманный за наносекунду, надо было придумать как минимум за две. Впрочем, она дает тебе талон, и ты [[занимаешь очередь->Занять очередь]] в нужный кабинет.


:: Пустить слюну
<<set $inadequacy to $inadequacy + 1>>Дама смотрит на тебя, ты смотришь на даму. Твои глаза разъезжаются в разные стороны, а изо рта начинает течь слюна.

— Ага, понятно, — говорит дама.

Она быстро что-то набирает у себя на компьютере, выходит из-за стойки и подходит к тебе. Она осторожно вытирает салфеточкой слюну, берет тебя за руку и уводит к кабинету доктора.

Вы натыкаетесь на очередь. Она усаживает тебя на стул, выдает тебе в руку талон и уходит.

* [[Ждать своей очереди|Занять очередь]]


:: Записаться к врачу
<<set $adequacy to $adequacy + 1>>Всё просто: эта женщина исполняет свою функцию, а ты этой функцией пользуешься. Ты без труда записываешься на приём. Тебе объясняют, где находится кабинет. И ты туда отправляешься. Занавес.

* [[Занять очередь]]


:: Занять очередь
Конечно же, ни одна очередь не обходится без бабули, желающей присесть тебе на уши.

* [[Заявить, что ты — перформанс артист]]
* [[Пересесть]]
* [[Выслушать]]
* [[Раскритиковать совковое мышление]]


:: Выслушать
<<set $tlenost to $tlenost + 1>>Обычно, ты, конечно, не воспринимаешь всерьез представителей совкового мышления, но тут ты решил прислушаться. Бабуля рассказывает тебе, чем они раньше жили, о чем мечтали, что строили и всякое такое. Почему-то тебе передается ее меланхолическое настроение. Как будто, человечество что-то очень сильно потеряло и явно свернуло куда-то не туда. Впрочем, это — мимолетное видение, сиюминутная слабость, от которой ты с легкостью отмахиваешься. Сказки это всё, несбыточные мечты и бредни совкового поколения. Но тягостные мысли все равно оседают на дне твоей души.

<<include "Остановить ятолькоспросильщика">>


:: Заявить, что ты — перформанс артист
<<set $inadequacy to $inadequacy + 1>>— Я — <<link "перформанс артист">>
  <<script>>
    Dialog.setup("О твоих перфомансах");
    Dialog.wiki("Перфоманс артист — твоя любимая из десяти работ. Ты не только в душе такой артистичный, но и снаружи. Поэтому иногда ты чувствуешь в себе тягу закатить этакое представление, устроить сцену перед честным народом. У всякого ремесленника есть инструмент, а твой инструмент — твое тело. Вот ты им и пользуешься на ужас публики.");
    Dialog.open();
  <</script>>
<</link>>, — заявляешь ты бабуле и привычно сталкиваешься со взглядом, полным недоумения.

Тогда ты решаешь наглядно показать, что это такое. К сожалению (или к счастью), общество еще не готово принять твою артистичную натуру (особенно, представители старой закалки). Бабуля понимает, что допустила стратегическую ошибку, нарекает тебя бесноватым и решает отсесть от тебя как можно подальше. Будь уверен, что в этот день она поставит за тебя свечку в церкви, только тебе это вряд ли поможет.

<<include "Остановить ятолькоспросильщика">>


:: Пересесть
<<set $adequacy to $adequacy + 1>>Бабуля капает тебе на мозги. Тебя это настолько угнетает, что ты решаешь пересесть куда-нибудь подальше. Ты молча встаешь и демонстративно покидаешь насиженное место. Но вот беда: свободных мест больше нет. Назад дороги нет, поэтому ты становишься у стенки, будто так и планировал.

<<include "Остановить ятолькоспросильщика">>


:: Раскритиковать совковое мышление
<<set $capitalism to $capitalism + 1>>Ты быстро распознаешь в ней совкое мышление и атакуешь первым. Твои бесконечные споры в тырнетах закалили тебя настолько, что любая контратака пролетает мимо тебя, а твой капитализм попадает сердобольной старушке прямо в сердце. Кажется, ты ей нравишься своей дерзостью: она залихватски ухмыляется и бросает на прощанье: "Мы еще с тобой встретимся, милок". Больше ты никогда ее не видел.

<<include "Остановить ятолькоспросильщика">>


:: Остановить ятолькоспросильщика
И тут мимо тебя вне очереди щемится ятолькоспросильщик.

* [[Побежать наперегонки]]
* [[Включить дзен-буддиста]]
* [[Показать свои шрамы]]
* [[Переложить проблему на плечи общества]]


:: Побежать наперегонки
<<set $capitalism to $capitalism + 1>>Он бежит, и ты бежишь. Почему? Потому что капитализм — это про конкуренцию. Кто первый занял рынок, тот и прав. Но ты не выдерживаешь конкуренцию с бодрым и румяным ятолькоспросильщиком. Он залетает внутрь, а ты остаешься наедине с разъяренным рыночком и получаешь по шапке за себя и за ятолькоспросильщика заодно. Оставшееся время ты тратишь на размышления о своей неконкурентоспособности.

Наконец, приходит твоя очередь.

* [[Зайти к врачу]]


:: Показать свои шрамы
<<set $inadequacy to $inadequacy + 1>>Да, тебе <<link "есть, что показать">>
  <<script>>
    Dialog.setup("Таинственные шрамы");
    Dialog.wiki("На вопрос про шрамы, обычно, ты отвечаешь так: склад, окутанной аурой смерти. Интервью закончено.");
    Dialog.open();
  <</script>>
<</link>> (особенно, такой достопочтенной публике). Поэтому ты резко распахиваешь свою рубашку, и ятолькоспросильщик, как и все присутствующие, видят твои ужасные шрамы. Ты начинаешь скалиться и вращать глазами во все стороны. Наглец понимает, что ты тут не просто так, что тебе терять особо нечего, поэтому пропускает тебя без очереди. Да и остальные жмутся к стенке и не выказывают возражений.

* [[Зайти к врачу]]

:: Переложить проблему на плечи общества
<<set $adequacy to $adequacy + 1>>Ты решаешь молча отсидеться. В конце концов, ты тут не один (бабуля сидит, полно народу). Иногда проще положиться на общество. Пускай займется этим кто-то другой, а ты вот просто прикинешься бревном. Тем более, лишние подозрения тебе ни к чему. В итоге так думает каждый, и ятолькоспросильщик просто проходит вне очереди.

Наконец, приходит твоя очередь.

* [[Зайти к врачу]]


:: Включить дзен-буддиста
<<set $tlenost to $tlenost + 1>>Ты останавливаешь его тем же вопросом, что и своих последователей: "Почему ты сейчас заходишь?"

"А действительно, почему?" — это последнее, что ты от него слышишь.

Наконец подходит твой черед, и ты [[тянешь ручку двери->Зайти к врачу]].


:: Зайти к врачу
Дама средних лет в белом халате спрашивает тебя: «На что жалуемся?»

[[Пожаловаться]]


:: Пожаловаться
<<nobr>>
  <<set $result to getTopCharacteristic([
    { name: "adequacy", value: $adequacy },
    { name: "inadequacy", value: $inadequacy },
    { name: "capitalism", value: $capitalism },
    { name: "tlenost", value: $tlenost },
  ])>>
  <<if $result.name === "adequacy">>
    <<include "Симулянт (концовка)">>
  <<elseif $result.name === "inadequacy">>
    <<include "Псих (концовка)">>
  <<elseif $result.name === "capitalism">>
    <<include "Безумие заразительно (концовка)">>
  <<elseif $result.name === "tlenost">>
    <<include "Тревоги есть у всех (концовка)">>
  <</if>>
<</nobr>>


:: Тревоги есть у всех (концовка)
Ты начинаешь тревожится, что не сможешь купить Radeon RTX 5090 и что тебя могут уволить с одной из 10 работ. По утрам ты встаешь вялый и делать ничего не хочешь (и 10 работ совсем не при чем). Иногда тебя одолевает внезапный страх (совершенно несвязанный со смелыми высказываниями в тырнетах) и учащается сердцебиение.

Врач с пониманием кивает и выписывает тебе целебный курс с применением новейшей технологии. Ты наконец получаешь вожделенный VR. Но, как и всё в этом мире, он тебе не нравится.

После своих злоключений, ты строчишь разочарованный обзор в чатике и продолжаешь жить своей жизнью, полной страхов и тревог в лоне безответного понимания капитализма.

<<run setup.unlock("Тревоги есть у всех (концовка)")>>Получена концовка «Тревоги есть у всех».


:: Симулянт (концовка)
Ты пытаешься и так, и этак изображать из себя встревоженного гражданина своей необъятной, но тебя подводит воображение. Врачиха ставит тебе пометку «Годен» и отправляет восвояси. План, придуманный за наносекунду, точно не мог подвести. Скорее всего, ты слишком мало набрался сегодня впечатлений.

<<run setup.unlock("Симулянт (концовка)")>>Получена концовка «Симулянт».


:: Псих (концовка)
Ты настолько правдоподобно расписываешь свое внутреннее беспокойство, что оно бурным потоком прорывается во внешнюю среду. Врачиха быстрым росчерком рисует тебе диагноз и зовет санитаров. Конечно, ты получаешь вожделенный VR на постоянной основе, но он тебе совершенно не нравится!
/* todo: и музыка из Ералаша "парам-пам" */
<<run setup.unlock("Псих (концовка)")>>Получена концовка «Псих».


:: Безумие заразительно (концовка)
Сегодня ты особенно хорошо преуспеваешь в распространении капитализма и уже не можешь остановиться. Ты обрушиваешь на врачиху свой бесконечный аналитический монолог: про обстановку своей необъятной; про нищету, которая не может никак научится считать сложные проценты; про экономические пузыри; про амортизацию; про мегакорпорации; про зло монополий и т.д, и т.п. Врачиха теряется от такого бурного потока противоречивой, разрозненной информации. Ты слышишь, как ее шестеренки начинают скрипеть. Ты видишь, как ее глаз начинает дергаться, а пар выходить из ушей. Она начинает глупо и истерично смеяться. Ты и сам удивляешься своему тлетворному влиянию на окружающих. Впрочем, тебе это никак не помогает: врачиху увозят на покой, а день объявляют не приемным.

<<run setup.unlock("Безумие заразительно (концовка)")>>Получена концовка «Безумие заразительно».
